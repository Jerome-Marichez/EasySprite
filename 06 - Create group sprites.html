<!doctype html>
<html lang="en">
<head>
	<meta http-equiv="X-UA-Compatible" content="chrome=1, IE=9">
	<meta charset="utf-8" />
	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"> 
	<title>Groupe Sprite</title>
	<script src="easysprite.js"></script>
	
	<style>
		#game {  display: block; margin: 0 auto;}
		body { background: #333; }
	</style>
</head>
<body>
	<canvas id='game'></canvas>
	
	<script>
	var loadProgress = 0; 
	var background;
		
	// Group balls and model
	var balls = [], ball;
	
	preload();
	
	function preload() {
		openScreen("game", 0, 0, 800, 600);	
	
		background = loadSprite("assets/image/blur1.jpg", onLoadSuccess)
		ball = loadSprite("assets/image/ball.png", onLoadSuccess)			
	}
	
	function onLoadSuccess() {
		loadProgress ++
			
		if (loadProgress == 2) {
			
			// Create group balls
			for(var n=0; n<100; n++) {
				balls[n] = copySprite(ball);
				balls[n].x = random(100, 700);
				balls[n].y = random(100, 500);
			}
			renderGame()
		}
	}
		
	function renderGame() {
		// Display background			
		displaySprite(background, 0, 0, 800, 600);
		
		// Display group balls	
		for(n in balls) {
			displaySprite(balls[n])
		}
			
		requestAnimationFrame(renderGame);
	}		
</script>
</body>
</html>